{"currentEditStep":3,"currentStep":3,"stepStateArr":["done","done","done","done"],"variableData":[[{"name":"ds","type":"DataSet","value":"DataSet"},{"name":"faces","type":"list","value":"length: 324"},{"name":"features","type":"list","value":"length: 324"},{"name":"model","type":"KMeans","value":"KMeans"},{"name":"pred","type":"ndarray","value":"dimension: (324,)"},{"name":"Ks","type":"list","value":"length: 5"},{"name":"losses","type":"list","value":"length: 5"},{"name":"k","type":"int","value":"8"}],[{"name":"ds","type":"DataSet","value":"DataSet"},{"name":"faces","type":"list","value":"length: 324"},{"name":"features","type":"list","value":"length: 324"},{"name":"model","type":"KMeans","value":"KMeans"},{"name":"pred","type":"ndarray","value":"dimension: (324,)"},{"name":"Ks","type":"list","value":"length: 5"},{"name":"losses","type":"list","value":"length: 5"},{"name":"k","type":"int","value":"8"}],[{"name":"ds","type":"DataSet","value":"DataSet"},{"name":"faces","type":"list","value":"length: 324"},{"name":"features","type":"list","value":"length: 324"},{"name":"model","type":"KMeans","value":"KMeans"},{"name":"pred","type":"ndarray","value":"dimension: (324,)"},{"name":"Ks","type":"list","value":"length: 5"},{"name":"losses","type":"list","value":"length: 5"},{"name":"k","type":"int","value":"8"}],[{"name":"ds","type":"DataSet","value":"DataSet"},{"name":"faces","type":"list","value":"length: 324"},{"name":"features","type":"list","value":"length: 324"},{"name":"model","type":"KMeans","value":"KMeans"},{"name":"pred","type":"ndarray","value":"dimension: (324,)"},{"name":"Ks","type":"list","value":"length: 5"},{"name":"losses","type":"list","value":"length: 5"},{"name":"k","type":"int","value":"8"}]],"resultDataArr":[[],[[[{"drawType":"chart","drawData":{"chartType":"ScatterPlots","pollingNum":12,"layout":{"title":"kmeans process","xaxis":{"range":[-0.6281698072950045,0.6631947482625643],"type":"linear","autorange":true},"yaxis":{"range":[-0.4734418728169362,0.7517077662762562],"type":"linear","autorange":true}},"chartData":[{"mode":"markers","type":"scatter","x":[0.38700172305107117,0.419912725687027,0.5417985916137695,0.45405346155166626,0.4945460855960846,0.5083842873573303,0.5796732306480408,0.4085361361503601,0.2787076234817505,0.22557203471660614,0.3831750154495239,0.4213006794452667,0.3815382421016693,0.3844667077064514,0.42628365755081177,0.40967774391174316,0.4417717158794403,0.17684714496135712,0.3022487759590149,0.441363126039505,0.4225976765155792,0.4473186433315277,0.44528767466545105,0.32998740673065186,0.4175848364830017,0.3969663381576538,0.39008674025535583,0.4091097414493561,0.29293182492256165,0.26597264409065247,0.44765201210975647,0.38020068407058716,0.46875521540641785,0.5024899840354919,0.2740061581134796,0.32773706316947937,0.36654403805732727,0.5017249584197998,0.5089765191078186,0.46968531608581543,0.4412265717983246,0.5004168152809143,0.4339420199394226,0.4536261558532715,0.3249032199382782],"y":[-0.11110728979110718,0.0024232398718595505,-0.016462361440062523,-0.046014316380023956,-0.03081173077225685,-0.035645946860313416,-0.02490730583667755,0.21557626128196716,0.012878788635134697,0.14416493475437164,0.07794555276632309,0.07416719198226929,-0.024083219468593597,-0.08872967213392258,-0.0033512432128190994,-0.10491319000720978,-0.11899411678314209,0.06552091240882874,0.05660981312394142,0.12120258063077927,0.08815625309944153,0.18816746771335602,0.1245236024260521,0.04447684437036514,0.037700530141592026,0.06983988732099533,0.12485913187265396,0.07780183106660843,0.06535132974386215,0.17363877594470978,0.0915752649307251,0.17860916256904602,-0.03696267679333687,0.013330795802175999,0.02577376179397106,0.06205951049923897,0.16321831941604614,0.07919616252183914,-0.0047238911502063274,0.038201894611120224,0.05771803855895996,-0.010411628521978855,0.12674279510974884,0.0020702513866126537,0.20230929553508759],"name":"第 1 类样本点","marker":{"color":"#0000FF","size":6,"symbol":"circle"}},{"mode":"markers","type":"scatter","x":[0.40636882185935974],"y":[0.04774869233369827],"name":"第 1 类中心点","marker":{"color":"#0000FF","size":12,"symbol":"square"}},{"mode":"markers","type":"scatter","x":[-0.2646261155605316,-0.2218879610300064,-0.23542557656764984,-0.34358423948287964,-0.29160407185554504,-0.30002716183662415,-0.26040583848953247,-0.2744452953338623,-0.24674251675605774,-0.25814929604530334,-0.16342264413833618,-0.2554459571838379,-0.2899131178855896,-0.24443291127681732,-0.39079228043556213,-0.4090021252632141,-0.3536912500858307,-0.2940385639667511,-0.043284960091114044,-0.27092528343200684,-0.2609237730503082,-0.20140083134174347,-0.24695880711078644,-0.3791782259941101,-0.20658902823925018,-0.29672321677207947,-0.18080240488052368,-0.3417345881462097,-0.2928372919559479,-0.3684990704059601,-0.39258116483688354,-0.32735228538513184,-0.0318915918469429,0.028724076226353645,-0.12328729033470154,-0.2215556502342224,-0.15005680918693542,-0.351309210062027,-0.22075559198856354,-0.26349228620529175,-0.20425064861774445],"y":[-0.1768595576286316,-0.03989129140973091,-0.24580614268779755,-0.15574736893177032,-0.07841427624225616,-0.07096631824970245,-0.18421553075313568,-0.3521049916744232,-0.20071858167648315,-0.003878871211782098,-0.11542406678199768,-0.18607772886753082,-0.09400761872529984,-0.19707661867141724,-0.15512153506278992,-0.1643887609243393,-0.05099603906273842,-0.21795709431171417,-0.1561586707830429,0.011867446824908257,-0.035679176449775696,-0.1401645541191101,-0.09638340771198273,-0.07271385937929153,-0.027744077146053314,-0.1275700181722641,-0.12564699351787567,-0.2536952495574951,-0.1170698031783104,-0.18000167608261108,-0.312895804643631,-0.20085856318473816,-0.08973321318626404,-0.12516380846500397,-0.08229508996009827,-0.12065259367227554,-0.24348005652427673,-0.20318587124347687,-0.06781315058469772,-0.22492459416389465,-0.08170375972986221],"name":"第 2 类样本点","marker":{"color":"#FF0000","size":6,"symbol":"circle"}},{"mode":"markers","type":"scatter","x":[-0.2547636032104492],"y":[-0.1405685395002365],"name":"第 2 类中心点","marker":{"color":"#FF0000","size":12,"symbol":"square"}},{"mode":"markers","type":"scatter","x":[-0.12039206922054291,-0.17648658156394958,-0.21554946899414062,-0.2606711983680725,0.026119675487279892,-0.2339225709438324,0.027907300740480423,-0.3941832184791565,-0.35865887999534607,-0.23322805762290955,-0.28705519437789917,-0.040147099643945694,-0.1890619397163391,-0.20475457608699799,-0.3077755868434906,-0.19720137119293213,-0.2384566366672516,-0.21243932843208313,-0.08005966991186142,-0.19379295408725739,-0.24764320254325867,-0.23343215882778168,-0.1451984941959381],"y":[0.022940954193472862,-0.010438047349452972,-0.09056388586759567,-0.10638918727636337,0.10957358032464981,0.19959160685539246,0.16264089941978455,-0.11239565163850784,-0.03580097854137421,0.24295295774936676,-0.046797432005405426,0.2179860770702362,-0.07844625413417816,-0.1709814965724945,-0.12739937007427216,-0.13794133067131042,-0.12810051441192627,-0.1662682145833969,0.05962076783180237,0.011519631370902061,-0.0331711582839489,0.2156163901090622,-0.19154968857765198],"name":"第 3 类样本点","marker":{"color":"#008000","size":6,"symbol":"circle"}},{"mode":"markers","type":"scatter","x":[-0.19635151326656342],"y":[-0.008426157757639885],"name":"第 3 类中心点","marker":{"color":"#008000","size":12,"symbol":"square"}},{"mode":"markers","type":"scatter","x":[-0.3462020456790924,-0.3601585328578949,-0.5534065961837769,-0.33881875872612,-0.41813692450523376,-0.2123224139213562,-0.42898520827293396,-0.5016040802001953,-0.5117811560630798,-0.5056731700897217,-0.4707992672920227,-0.36209508776664734,-0.35873815417289734,-0.40975597500801086,-0.3050273060798645,-0.3774630129337311,-0.49083709716796875,-0.38951966166496277,-0.5091438293457031,-0.5416170954704285,-0.42674553394317627,-0.4428597390651703,-0.45850899815559387,-0.3663070797920227],"y":[0.18924623727798462,0.1959773451089859,0.16630613803863525,0.16121013462543488,0.1990623027086258,0.19988319277763367,0.14502090215682983,0.15171992778778076,0.1347150206565857,0.08058125525712967,0.13151858747005463,0.05006615072488785,0.1461823731660843,0.20356643199920654,0.11107704788446426,0.18701177835464478,0.21085605025291443,0.009844408370554447,0.004736702889204025,0.057876188308000565,0.31046563386917114,0.18697623908519745,0.1973196566104889,0.0553167425096035],"name":"第 4 类样本点","marker":{"color":"#CD853F","size":6,"symbol":"circle"}},{"mode":"markers","type":"scatter","x":[-0.4202713966369629],"y":[0.14527274668216705],"name":"第 4 类中心点","marker":{"color":"#CD853F","size":12,"symbol":"square"}},{"mode":"markers","type":"scatter","x":[-0.3110051453113556,-0.1445300281047821,-0.22055800259113312,-0.2606927454471588,-0.2766960859298706,-0.2596171200275421,-0.3567470908164978,-0.2774968445301056,-0.25094226002693176,-0.1880880743265152,-0.3192594051361084,-0.3341476023197174,-0.40624597668647766,-0.37531667947769165,-0.4017334282398224,-0.3734949827194214,-0.4221816658973694,-0.45004385709762573,-0.3550865948200226,-0.4046337604522705,-0.385362833738327,-0.2654506266117096,-0.2738475799560547,-0.2813992202281952,-0.2916349172592163,-0.18124008178710938,-0.22084572911262512,-0.14638784527778625,-0.07791133970022202,-0.37555932998657227,-0.39735355973243713,-0.31015726923942566,-0.3048243522644043,-0.3549498915672302,-0.3172030448913574,-0.1907002478837967,-0.32573580741882324,-0.32141128182411194,-0.3199419379234314,-0.3928580582141876,-0.4031277298927307,-0.4213210344314575,-0.21177992224693298,-0.3985072374343872,-0.32734376192092896,-0.3740276098251343,-0.23020699620246887,-0.2417529821395874,-0.2705305516719818,-0.3078314960002899,-0.27992555499076843,-0.3336365520954132,-0.2925625741481781,-0.1314663589000702,-0.17015840113162994,-0.2049264907836914,-0.20402920246124268,-0.31687796115875244,-0.34113365411758423,-0.26483413577079773,-0.2779225707054138,-0.30431872606277466,-0.35723304748535156],"y":[-0.19649672508239746,-0.17160587012767792,-0.24639885127544403,-0.23629558086395264,-0.14647367596626282,-0.1677100956439972,-0.2410709112882614,-0.2671707570552826,-0.24198216199874878,-0.2360966056585312,-0.2199014276266098,-0.16117291152477264,-0.3562670648097992,-0.26521584391593933,-0.3114200532436371,-0.31261155009269714,-0.3352283835411072,-0.3951684236526489,-0.26586636900901794,-0.2657301723957062,-0.15433500707149506,-0.28058484196662903,-0.29517918825149536,-0.27748095989227295,-0.26115044951438904,-0.3274860680103302,-0.23106057941913605,-0.24689969420433044,-0.2404339462518692,-0.14194703102111816,-0.24712498486042023,-0.16637398302555084,-0.20909912884235382,-0.35317716002464294,-0.14884036779403687,-0.3211711347103119,-0.18139955401420593,-0.3835282623767853,-0.38745763897895813,-0.36883342266082764,-0.29659304022789,-0.33738791942596436,-0.2345873862504959,-0.3031193017959595,-0.2770325541496277,-0.23378783464431763,-0.2716771960258484,-0.18405064940452576,-0.17578710615634918,-0.15233683586120605,-0.1857718676328659,-0.15610632300376892,-0.23085801303386688,-0.2767794132232666,-0.30609941482543945,-0.2260403037071228,-0.22179260849952698,-0.31048309803009033,-0.29353660345077515,-0.30556586384773254,-0.24242174625396729,-0.3297262489795685,-0.31400448083877563],"name":"第 5 类样本点","marker":{"color":"#FFA500","size":6,"symbol":"circle"}},{"mode":"markers","type":"scatter","x":[-0.298234224319458],"y":[-0.2560158967971802],"name":"第 5 类中心点","marker":{"color":"#FFA500","size":12,"symbol":"square"}},{"mode":"markers","type":"scatter","x":[0.3631193935871124,0.33848053216934204,0.3131088614463806,0.3335341513156891,0.46409085392951965,0.3523853123188019,0.4576016068458557,0.5506113767623901,0.5268953442573547,0.43131023645401,0.4557510018348694,0.5112258791923523,0.45495447516441345,0.5554386973381042,0.4895477890968323,0.42589157819747925,0.41762280464172363,0.4747481048107147,0.5002626776695251,0.48913031816482544,0.5388399362564087,0.5439350008964539,0.5355926156044006,0.5761792659759521,0.5275710821151733,0.5884315371513367,0.5488703846931458,0.5606217980384827,0.5110024213790894,0.4437769055366516,0.4648839235305786,0.5655220150947571,0.49795296788215637,0.4756143093109131,0.5146238207817078,0.5531630516052246,0.5194790363311768,0.463611900806427,0.5260842442512512,0.4742770195007324,0.4548772871494293,0.4799705147743225,0.45289477705955505,0.5388242602348328,0.4736426770687103,0.5685421824455261,0.43797722458839417,0.4225277006626129,0.4637223482131958,0.47754403948783875,0.5748745203018188,0.5506574511528015,0.4891290068626404],"y":[-0.1975811868906021,-0.0806800127029419,-0.22865520417690277,-0.23116950690746307,-0.3248837888240814,-0.11592565476894379,-0.3470526337623596,-0.17951157689094543,-0.15350079536437988,-0.1563510149717331,-0.25531700253486633,-0.23827631771564484,-0.35630467534065247,-0.2845349907875061,-0.21086782217025757,-0.2608645558357239,-0.2434927225112915,-0.3089952766895294,-0.33115828037261963,-0.3949880599975586,-0.21201781928539276,-0.2060215324163437,-0.1891433298587799,-0.17087651789188385,-0.11499640345573425,-0.2387775182723999,-0.19717176258563995,-0.21465519070625305,-0.10836169868707657,-0.29772061109542847,-0.21034762263298035,-0.16425207257270813,-0.21207073330879211,-0.18595099449157715,-0.1622423380613327,-0.20863525569438934,-0.24220679700374603,-0.2948834002017975,-0.25102293491363525,-0.29736679792404175,-0.1205894947052002,-0.2500355541706085,-0.15862995386123657,-0.11314074695110321,-0.18010444939136505,-0.15113431215286255,-0.1635078489780426,-0.12281135469675064,-0.1316131055355072,-0.17098557949066162,-0.1874653846025467,-0.09287603944540024,-0.17471835017204285],"name":"第 6 类样本点","marker":{"color":"#A52A2A","size":6,"symbol":"circle"}},{"mode":"markers","type":"scatter","x":[0.4853007197380066],"y":[-0.2093673199415207],"name":"第 6 类中心点","marker":{"color":"#A52A2A","size":12,"symbol":"square"}},{"mode":"markers","type":"scatter","x":[0.01684926636517048,-0.04212051257491112,-0.02838699333369732,-0.04138216748833656,0.049359895288944244,0.010039839893579483,-0.037040915340185165,-0.1263408362865448,-0.009373598732054234,-0.044019099324941635,0.08927550166845322,0.07392285019159317,0.07000135630369186,-0.05447551608085632,-0.04532492905855179,-0.049599356949329376,0.05630134046077728,-0.10147154331207275,0.058260656893253326,0.0038872489240020514,0.16435468196868896,0.030550971627235413,0.0347125418484211,0.034396618604660034,0.018527070060372353,0.08082393556833267,0.013862808234989643,0.07185236364603043,0.0024336723145097494,0.02138863503932953,-0.020298002287745476,0.06569157540798187,-0.007626461796462536,-0.14824818074703217,-0.11361227184534073,-0.07887525111436844,-0.06843633949756622,-0.14639067649841309,0.031081782653927803,0.11887554824352264,0.23219089210033417,0.13107728958129883,0.21105563640594482,0.1973876953125,0.06995107978582382,-0.021595366299152374,-0.044880203902721405,-0.05531914532184601,0.04176006838679314,0.05117106810212135,-0.0023438693024218082,0.1353023797273636,0.14060454070568085,-0.029564067721366882,-0.03423614427447319,0.06340420991182327,-0.051329631358385086,0.040937650948762894,-0.2151005119085312,-0.043120719492435455,-0.04862495884299278,-0.11694348603487015,-0.025396963581442833,-0.08344640582799911,-0.1593286544084549,-0.03307909518480301,-0.08642589300870895,-0.09802501648664474,-0.07075867056846619,-0.06354702264070511,-0.07221394777297974,-0.013847356662154198,-0.010541199706494808,-0.05253332853317261,-0.006950609385967255],"y":[0.1427948772907257,0.5318310260772705,0.08957290649414062,0.4946344494819641,0.20102521777153015,0.10088376700878143,0.23049290478229523,0.02316383831202984,0.25999438762664795,0.06459499150514603,0.060356881469488144,0.07616877555847168,0.15580344200134277,0.24506323039531708,0.2173590362071991,0.21174414455890656,0.2267254739999771,0.3265848457813263,0.1450749635696411,0.16252535581588745,0.38107457756996155,0.43853455781936646,0.4701662063598633,0.498742938041687,0.6309643387794495,0.5530515909194946,0.4688429534435272,0.47952398657798767,0.6033952236175537,0.5533276796340942,0.5590038895606995,0.5322133302688599,0.4091617465019226,0.5430102944374084,0.4359002709388733,0.5389508008956909,0.547437846660614,0.41551080346107483,0.20322956144809723,0.29776105284690857,0.23464997112751007,0.21057769656181335,0.191901296377182,0.17067880928516388,0.20610389113426208,0.20196306705474854,0.3333585560321808,0.2275322824716568,0.07537319511175156,0.26309752464294434,0.17550767958164215,0.11327695846557617,0.07460955530405045,0.11773613095283508,0.07353074103593826,0.5111473202705383,0.5714541673660278,0.4876954257488251,0.5321363210678101,0.5336846709251404,0.5701426863670349,0.6104814410209656,0.5843716263771057,0.521208643913269,0.5725793838500977,0.5672919750213623,0.6043501496315002,0.6271939873695374,0.5488970875740051,0.5975859761238098,0.45933955907821655,0.6436502933502197,0.673434317111969,0.6027670502662659,0.5318203568458557],"name":"第 7 类样本点","marker":{"color":"#800080","size":6,"symbol":"circle"}},{"mode":"markers","type":"scatter","x":[-0.0022784059401601553],"y":[0.36729809641838074],"name":"第 7 类中心点","marker":{"color":"#800080","size":12,"symbol":"square"}}]}}]]],[[[{"drawType":"imgset","drawData":{"imgUrl":["kernel_objs/202311294460/40d86192-c1d8-4fa7-9b91-c4c89077d546/ca671330-aad5-11ef-b500-026e03e27d64.png"]}}]]],[null,null,null,null,null,[[{"drawType":"chart","drawData":{"chartType":"ScatterPlots","layout":{"title":"undefined","showlegend":false,"xaxis":{"showticklabels":true,"range":[3.7429467084639496,8.25705329153605],"type":"linear","autorange":true},"yaxis":{"showticklabels":true,"range":[0.7017032110029698,0.7886969969476015],"type":"linear","autorange":true}},"chartData":[{"x":[4,5,6,7,8],"y":[0.7831390606233611,0.7654754296042684,0.7627570747259795,0.7146092455104978,0.7072611473272102],"mode":"line","type":"scatter","marker":"undefined"}]}}]]]],"codeInputArr":["ds = data.get('facefeat')\nfaces = ds.field(0)\nfeatures = ds.field(1)","model = KMeans(K=7)\nmodel.train(features)","pred = model.predict_all(features)\nfig() + plot(faces, pred, type='face_cluster')","Ks = [4, 5, 6, 7, 8]\nlosses = []\nfor k in Ks:\n    model = KMeans(K=k)\n    model.train(features, visual=False)\n    losses.append(model.loss)\nfig() + plot(losses, Ks, type='elbow')"],"blocksData":null}